### 1. HWP 수식 스크립트의 논리적 구조

HWP 수식 편집기는 복잡한 수식도 템플릿(Template)을 통해 간단하게 만들 수 있도록 설계된 명령어 기반의 시스템입니다. 수식 자체의 파일 포맷은 **수식 스크립트**라는 텍스트 기반의 명령어로 구성됩니다.

| 영역 | 설명 | 주요 구성 요소 |
| :--- | :--- | :--- |
| **A. 기본 개념 및 규칙** | 수식 스크립트 작성 시 지켜야 할 기본적인 문법 및 형식 정의. | 항 구분, 항 묶음, 줄 바꿈, 칸 맞춤, 빈칸 표현. |
| **B. 글꼴 명령** | 수식 내에서 사용되는 글꼴 및 글자 모양 정의. | 로만체 (`rm`), 볼드체 (`bold`), 이탤릭체 (`it`), 크기 비율 (`scale`). |
| **C. 기본 명령어** | 수식의 구조(분수, 첨자, 행렬, 적분 등)를 만드는 핵심 명령어. | `OVER`, `SQRT`, `SUM`, `MATRIX`, `CASES` 등. |
| **D. 기호 정의** | 수식에 사용되는 다양한 특수 기호(그리스 문자, 연산자, 화살표 등). | `Alpha`, `times`, `larrow` 등. |

### 2. 수식 스크립트의 기본 규칙 및 형식

수식 스크립트는 일반 문서 편집과 달리 수식 편집기 고유의 규칙을 따릅니다.

| 필드/요소 | 설명 | 형식/명령어 | 포맷/길이 |
| :--- | :--- | :--- | :--- |
| **항의 구분** | 수식 편집기에서 빈칸이나 탭은 항을 구분하는 데 사용됨. | 빈칸, `<Enter>`, `<Tab>` | N/A (문자열 구분자 역할) |
| **여러 항 묶음** | 여러 항을 하나로 묶어 처리할 때 사용. | `{ }` | N/A (문자열 괄호) |
| **긴 낱말 묶음** | 한 낱말이 9자를 초과할 때 하나의 항으로 처리하기 위해 사용. | `" "` | N/A (문자열 따옴표) |
| **줄 바꾸기** | 수식 결과에서 강제로 줄을 바꿀 때 사용. | `#` | 1 WCHAR (유니코드 문자) |
| **세로 칸 맞춤** | 세로로 칸을 맞추어 정렬할 때 사용. | `&` | 1 WCHAR (유니코드 문자) |
| **정상 빈칸** | 표시 화면에 일반적인 빈칸을 넣을 때 사용. | `~` | 1 WCHAR (유니코드 문자) |
| **작은 빈칸** | 1/4 크기의 빈칸을 표시할 때 사용. | `` ` `` | 1 WCHAR (유니코드 문자) |
| **글꼴 크기 조정** | 첫 번째 글자 크기를 100으로 보고 글자의 크기 비율(%)로 표현. | `scale` (비율) | N/A (명령어) |
| **로만체 전환** | 기본 이탤릭체 대신 로만체(영문-수식)를 사용할 때. | `rm` | N/A (명령어) |
| **이탤릭체 전환** | 로만체 입력 중 이탤릭체로 다시 전환할 때. | `it` | N/A (명령어) |
| **볼드체** | 볼드체를 입력하기 위해 사용. | `bold` | N/A (명령어) |

### 3. 주요 명령어 목록 및 사용 형식

수식의 형태를 정의하는 주요 명령어의 형식입니다.

| 명령어 | 설명 | 사용 형식 (예) | 주요 구성 요소 (operand) |
| :--- | :--- | :--- | :--- |
| **OVER** | 분수를 표시하며 가로선 포함. | `1 over 2` | [분자] `over` [분모] |
| **ATOP** | 분수를 표시하며 가로선 생략. | `x atop y` | [분자] `atop` [분모] |
| **SQRT** | 제곱근을 표시. 세제곱근 등 거듭제곱근은 `^`와 함께 사용. | `sqrt 2`, `^3sqrt{x^2 +1}` | `sqrt` [피제곱수] |
| **^ (SUP)** | 윗 첨자를 표시. | `E=mc^2` | [밑] `^` [첨자] |
| **\_ (SUB)** | 아래 첨자를 표시. | `H_2 O` | [밑] `_` [첨자] |
| **INT, OINT** | 적분 기호를 표시. | `int _1 ^2 {3x^2}dx` | `int` `from` [시작점] `to` [끝점] [피적분 함수] |
| **SUM** | 총합 기호(시그마)를 표시. | `sum_{x=0} ^{inf}` | `sum` `_{`[시작]`} ^{`[끝]`} `[항] |
| **LIM, lim** | 극한 기호를 표시 (대소문자 구분). | `lim _{x -> 0} {{1} over {x}}` | `lim` `_{`[변수->값]`} `[식] |
| **BIGG** | 기호 뒤에 쓰인 기호의 크기를 확대. | `bigg / {x+y} over {x-y}` | `bigg` [기호] |
| **CASES** | 여러 행을 묶는 묶음표 `{`를 표시. | `cases {2x+y=4 # 3x-4y=-1}` | `cases {`[수식 1] `#` [수식 2] `}` |
| **CHOOSE/BINOM** | 조합 기호 ()$`을 입력. | `[전체항] CHOOSE [선택항]` | [전체항] `CHOOSE` [선택항] |
| **MATRIX** | 행렬을 입력 (괄호 없음). | `matrix{a &b # c&d}` | `matrix{` [내용: &로 열 구분, #로 행 구분] `}` |
| **PMATRIX** | 행렬을 입력 (소괄호 `()` 표시). | `pmatrix{...}` | `pmatrix{` [내용] `}` |
| **BMATRIX** | 행렬을 입력 (대괄호 `[]` 표시). | `bmatrix{...}` | `bmatrix{` [내용] `}` |
| **DMATRIX** | 행렬을 입력 (세로줄 `|` 표시). | `dmatrix{...}` | `dmatrix{` [내용] `}` |
| **NOT** | 글자 위에 사선을 그어줌. | `not =` | `not` [항] |
| **COLOR** | 지정한 색상(RGB)으로 표시. | `{COLOR {255,0,255} {3}} over {4}` | `COLOR {R,G,B} {`[항] `}` |

### 4. 수식용 기호 요약

| 기호 종류 | 명령어 (예) | 설명 |
| :--- | :--- | :--- |
| **그리스 대문자** | `Alpha`, `Gamma`, `Delta`, `Omega` 등 | 알파벳 이름 그대로 사용. |
| **그리스 소문자** | `alpha`, `beta`, `gamma`, `pi` 등 | 알파벳 이름 그대로 사용. |
| **특수 그리스 문자** | `vartheta`, `varpi`, `varsigma` 등 | 일반 소문자와 모양이 다름. |
| **연산 기호** | `TIMES`, `DIV` (나눗셈) | `PLUSMINUS`, `MINUSPLUS`, `CIRC`, `BULLET`. |
| **논리/관계 기호** | `neq` or `!=` (같지 않음), `==` or `EQUIV` (동치). | `LEQ` (작거나 같음), `GEQ` (크거나 같음), `PROPTO` (비례). |
| **집합 기호** | `UNION` (합집합), `INTER` (교집합), `SQCAP` (제곱 교집합). | `PROD` (곱 기호). |
| **화살표** | `larrow` ($\leftarrow$), `rarrow` ($\rightarrow$), `UPARROW` ($\Uparrow$). | `lrarrow` ($\leftrightarrow$), `hookleft`, `hookright`. |
| **글자 장식** | `acute`, `bar`, `vec`, `hat`, `tilde` 등. | 해당 명령어 뒤에 장식할 글자를 붙임 (예: `acute A`). |

